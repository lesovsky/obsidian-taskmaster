# ะัะปััะธะบะพะปะพะฝะพัะฝัะน ะปะตะนะฐัั ะบะฐััะพัะตะบ

**ะกัะฐััั:** Approved
**ะะฐัะฐ:** 2026-02-22

## 1. ะะพะฝัะตะบัั ะธ ะฟัะพะฑะปะตะผะฐ

### ะขะตะบััะฐั ัะธััะฐัะธั

ะะฐััะพัะบะธ ะทะฐะดะฐั ะฒะฝัััะธ ะณััะฟะฟั ะฒัะตะณะดะฐ ะพัะพะฑัะฐะถะฐัััั ะฒ ะพะดะฝั ะบะพะปะพะฝะบั: ะบะฐะถะดะฐั ะบะฐััะพัะบะฐ ัะฐัััะณะธะฒะฐะตััั ะฝะฐ 100% ัะธัะธะฝั ะณััะฟะฟั. ะัะธ ััะพะผ ะฑะพะปััะฐั ัะฐััั ะฟัะฐะฒะพะน ะฟะพะปะพะฒะธะฝั ะบะฐััะพัะบะธ ะพััะฐัััั ะฟัััะพะน โ ะพัะพะฑะตะฝะฝะพ ะทะฐะผะตัะฝะพ ะฒ **default-ะฒะธะดะต** (3-ัััะพัะฝะฐั ะบะฐััะพัะบะฐ) ะธ ะฒ **compact-ะฒะธะดะต** (ะพะดะฝะพัััะพัะฝะฐั ะบะฐััะพัะบะฐ ั ะบะพัะพัะบะธะผ ัะตะบััะพะผ).

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ full-width ะณััะฟะฟะฐ
โ ๐ด โณ                                             2026-03-24 โ
โ ะะพะดะณะพัะพะฒะธัั ะพัััั                                            โ  โ ะฟัััะพะต ะผะตััะพ ัะฟัะฐะฒะฐ
โ ๐ค ะะฒะฐะฝะพะฒ ะ.                                                 โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ ๐ก ๐๏ธ                                            2026-04-01 โ
โ ะัะพะฒะตััะธ ัะตะฒัั ะบะพะดะฐ                                          โ
โ ๐ค ะะตััะพะฒ ะ.                                                 โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### ะฆะตะปั

ะะฐัั ะฟะพะปัะทะพะฒะฐัะตะปั ะฒะพะทะผะพะถะฝะพััั ะฟะตัะตะบะปััะธัััั ะฒ ะผัะปััะธะบะพะปะพะฝะพัะฝัะน ัะตะถะธะผ ะพัะพะฑัะฐะถะตะฝะธั ะบะฐััะพัะตะบ. ะ ััะพะผ ัะตะถะธะผะต ัะธัะธะฝะฐ ะบะฐััะพัะบะธ ัะธะบัะธัะพะฒะฐะฝะฐ โ **25% ะพั ัะธัะธะฝั full-width ะณััะฟะฟั**:

- **4 ะบะฐััะพัะบะธ ะฒ ัััะพะบั** โ ะบะพะณะดะฐ ะณััะฟะฟะฐ ะทะฐะฝะธะผะฐะตั ะฟะพะปะฝัั ัะธัะธะฝั ะดะพัะบะธ
- **2 ะบะฐััะพัะบะธ ะฒ ัััะพะบั** โ ะบะพะณะดะฐ ะณััะฟะฟะฐ ะทะฐะฝะธะผะฐะตั ะฟะพะปะพะฒะธะฝั ัะธัะธะฝั ะดะพัะบะธ

ะะตะถะธะผ ะฟะตัะตะบะปััะฐะตััั **ะณะปะพะฑะฐะปัะฝะพ** ัะตัะตะท ะฝะฐัััะพะนะบะธ ะฟะปะฐะณะธะฝะฐ (ะฐะฝะฐะปะพะณะธัะฝะพ `cardView`). ะงะธัะปะพ ะบะพะปะพะฝะพะบ ะฝะต ะฝะฐัััะฐะธะฒะฐะตััั โ ัะพะปัะบะพ ะฒะบะปััะธัั/ะฒัะบะปััะธัั.

```
ะะตะถะธะผ multi, full-width ะณััะฟะฟะฐ:
โโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโ
โ ๐ด โณ        โ ๐ก ๐๏ธ        โ ๐ด โณ        โ ๐ข ๐        โ
โ ะะพะดะณะพัะพะฒะธัั  โ ะัะพะฒะตััะธ     โ ะกะพะทะฒะพะฝะธัััั  โ ะะฑะฝะพะฒะธัั     โ
โ ๐ค ะะฒะฐะฝะพะฒ   โ ๐ค ะะตััะพะฒ    โ ๐ค ะกะธะดะพัะพะฒ  โ ๐ค ะะพะทะปะพะฒ   โ
โโโโโโโโโโโโโโโโดโโโโโโโโโโโโโโโดโโโโโโโโโโโโโโโดโโโโโโโโโโโโโโโ

ะะตะถะธะผ multi, half-width ะณััะฟะฟะฐ:
โโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโ
โ ๐ด โณ        โ ๐ก ๐๏ธ        โ
โ ะะพะดะณะพัะพะฒะธัั  โ ะัะพะฒะตััะธ     โ
โ ๐ค ะะฒะฐะฝะพะฒ   โ ๐ค ะะตััะพะฒ    โ
โโโโโโโโโโโโโโโโดโโโโโโโโโโโโโโโ
```

### ะะตััะธะบะธ ััะฟะตัะฐ

- ะะพะปัะทะพะฒะฐัะตะปั ะผะพะถะตั ะฟะตัะตะบะปััะธัั ัะตะถะธะผ ะฒ ะฝะฐัััะพะนะบะฐั ะฟะปะฐะณะธะฝะฐ ะธ ะผะณะฝะพะฒะตะฝะฝะพ ัะฒะธะดะตัั ะธะทะผะตะฝะตะฝะธะต
- ะะตะถะธะผ ัะพััะฐะฝัะตััั ะฒ `data.json` ะธ ะฒะพัััะฐะฝะฐะฒะปะธะฒะฐะตััั ะฟัะธ ะฟะตัะตะทะฐะฟััะบะต
- Drag-and-drop ัะฐะฑะพัะฐะตั ะฒ ะผัะปััะธะบะพะปะพะฝะพัะฝะพะผ ัะตะถะธะผะต
- ะะพะฒะตะดะตะฝะธะต ะฟะพ ัะผะพะปัะฐะฝะธั (`single`) ะธะดะตะฝัะธัะฝะพ ัะตะบััะตะผั โ ะฑะตะท ัะตะณัะตััะธะน

---

## 2. ะขัะตะฑะพะฒะฐะฝะธั

### ะคัะฝะบัะธะพะฝะฐะปัะฝัะต

- [ ] [FR-1] ะ ะฝะฐัััะพะนะบะฐั ะฟะปะฐะณะธะฝะฐ (Settings tab) ะดะพะฑะฐะฒะปัะตััั ะฟะตัะตะบะปััะฐัะตะปั **Card layout**: `Single column` / `Multi-column`
- [ ] [FR-2] ะ ัะตะถะธะผะต `multi`: ะบะฐััะพัะบะธ ะฒ **full-width** ะณััะฟะฟะต ะพัะพะฑัะฐะถะฐัััั ะฒ **4 ะบะพะปะพะฝะบะธ**
- [ ] [FR-3] ะ ัะตะถะธะผะต `multi`: ะบะฐััะพัะบะธ ะฒ **half-width** ะณััะฟะฟะต ะพัะพะฑัะฐะถะฐัััั ะฒ **2 ะบะพะปะพะฝะบะธ**
- [ ] [FR-4] ะ ัะตะถะธะผะต `single`: ะฟะพะฒะตะดะตะฝะธะต ะธะดะตะฝัะธัะฝะพ ัะตะบััะตะผั โ 1 ะบะพะปะพะฝะบะฐ ะฒะพ ะฒัะตั ะณััะฟะฟะฐั
- [ ] [FR-5] ะะตัะตะบะปััะตะฝะธะต ะฟัะธะผะตะฝัะตััั **ะผะณะฝะพะฒะตะฝะฝะพ** ะบะพ ะฒัะตะผ ะณััะฟะฟะฐะผ ะฝะฐ ะฒัะตั ะดะพัะบะฐั ะฑะตะท ะฟะตัะตะทะฐะณััะทะบะธ
- [ ] [FR-6] ะะฐััะพัะบะธ, ะฝะต ะทะฐะฟะพะปะฝะธะฒัะธะต ัััะพะบั, ะทะฐะฝะธะผะฐัั ัะฒะพั ะดะพะปั (25%) ะธ **ะฝะต ัะฐัััะณะธะฒะฐัััั** ะฝะฐ ะฒัั ัััะพะบั โ ะฒัะต ะบะฐััะพัะบะธ ะพะดะธะฝะฐะบะพะฒะพะณะพ ัะฐะทะผะตัะฐ
- [ ] [FR-7] ะ ัะตะถะธะผะต `multi` ะฟะพะปะต **ยซะงัะพยป** (`task.what`) ะฒ default-ะบะฐััะพัะบะต ะพะฑัะตะทะฐะตััั ะฒ ะพะดะฝั ัััะพะบั ั ะผะฝะพะณะพัะพัะธะตะผ; ะฟะพะปะฝัะน ัะตะบัั ะดะพัััะฟะตะฝ ัะตัะตะท `title`-tooltip ะฟัะธ ะฝะฐะฒะตะดะตะฝะธะธ
- [ ] [FR-8] Empty State ะฒ ะฟัััะพะน ะณััะฟะฟะต ะทะฐะฝะธะผะฐะตั **ะฒัั ัะธัะธะฝั** ัะตะปะฐ ะณััะฟะฟั (ะฝะต ัะฐะทะฑะธะฒะฐะตััั ะฟะพ ะบะพะปะพะฝะบะฐะผ)
- [ ] [FR-9] ะะตะถะธะผ `multi` ะฟัะธะผะตะฝัะตััั ะบะพ ะฒัะตะผ ะฒะธะดะฐะผ ะบะฐััะพัะตะบ: ะธ `cardView: 'default'`, ะธ `cardView: 'compact'` โ ะพะฑะฐ ะพัะพะฑัะฐะถะฐัััั ะฒ 4/2 ะบะพะปะพะฝะบะธ
- [ ] [FR-10] ะัะธ ะธะทะผะตะฝะตะฝะธะธ ัะธัะธะฝั ะณััะฟะฟั (fullโhalf) ะปะตะนะฐัั ะบะฐััะพัะตะบ ะฟะตัะตััะธััะฒะฐะตััั ะฝะตะผะตะดะปะตะฝะฝะพ

### ะะตััะฝะบัะธะพะฝะฐะปัะฝัะต

- [ ] [NFR-1] Drag-and-drop ะบะพััะตะบัะฝะพ ัะฐะฑะพัะฐะตั ะฒ grid-ะบะพะฝัะตะนะฝะตัะต (SortableJS + CSS Grid)
- [ ] [NFR-2] ะะฝะฐัะตะฝะธะต ะฟะพ ัะผะพะปัะฐะฝะธั `'single'` โ ะฟะพะฒะตะดะตะฝะธะต ะดะปั ะฝะพะฒัั ะธ ัััะตััะฒัััะธั ัััะฐะฝะพะฒะพะบ ะธะดะตะฝัะธัะฝะพ ัะตะบััะตะผั
- [ ] [NFR-3] **ะคะธัะฐ ะฟัะตะดะฝะฐะทะฝะฐัะตะฝะฐ ัะพะปัะบะพ ะดะปั ะดะตัะบัะพะฟะฐ.** ะะฐ ัะบัะฐะฝะฐั <600px ะบะฐััะพัะบะธ ะฟัะธะฝัะดะธัะตะปัะฝะพ ะพัะพะฑัะฐะถะฐัััั ะฒ 1 ะบะพะปะพะฝะบั ัะตัะตะท media query, ะฝะตะทะฐะฒะธัะธะผะพ ะพั ะฝะฐัััะพะนะบะธ
- [ ] [NFR-4] ะะดะธะฝะพัะฝะฐั ะบะฐััะพัะบะฐ (ะธ ะปัะฑะพะต ะฝะตะฟะพะปะฝะพะต ะบะพะปะธัะตััะฒะพ ะฒ ัััะพะบะต) ะทะฐะฝะธะผะฐะตั 25% ัะธัะธะฝั โ **ะฝะต ัะฐัััะณะธะฒะฐะตััั**. ะัะต ะบะฐััะพัะบะธ ะพะดะธะฝะฐะบะพะฒะพะณะพ ัะฐะทะผะตัะฐ: ัะฐัััะณะธะฒะฐะฝะธะต ะฝะฐัััะฐะปะพ ะฑั ะฒะธะทัะฐะปัะฝัั ะพะดะฝะพัะพะดะฝะพััั ัะตัะบะธ
- [ ] [NFR-5] CSS Grid ะธัะฟะพะปัะทัะตั `minmax(0, 1fr)`: ะบะฐััะพัะบะธ ัะถะธะผะฐัััั ะฟัะพะฟะพััะธะพะฝะฐะปัะฝะพ, ะณะพัะธะทะพะฝัะฐะปัะฝัะน ัะบัะพะปะป ะฝะต ะฟะพัะฒะปัะตััั
- [ ] [NFR-6] ะัะต CSS-ะบะปะฐััั ัะพะปัะบะพ ะฒ `src/styles.css`, ะฝะธะบะฐะบะธั `<style>` ะฒ `.svelte`

---

## 3. User Stories

### US-1: ะะตัะตะบะปััะตะฝะธะต ะฒ ะผัะปััะธะบะพะปะพะฝะพัะฝัะน ัะตะถะธะผ

**ะะฐะบ** project manager **ัะพัั** ะฒะบะปััะธัั ะผัะปััะธะบะพะปะพะฝะพัะฝัะน ะปะตะนะฐัั ะฒ ะฝะฐัััะพะนะบะฐั **ััะพะฑั** ะฒะธะดะตัั ะฑะพะปััะต ะทะฐะดะฐั ะฝะฐ ัะบัะฐะฝะต ะฑะตะท ะฒะตััะธะบะฐะปัะฝะพะน ะฟัะพะบัััะบะธ.

**ะัะธัะตัะธะธ ะฟัะธัะผะบะธ:**
- ะ Settings โ TaskMaster ะตััั ะฟะฐัะฐะผะตัั Card layout ั ะดะฒัะผั ะทะฝะฐัะตะฝะธัะผะธ
- ะะพัะปะต ะฒัะฑะพัะฐ Multi-column ะฒัะต ะณััะฟะฟั ะผะณะฝะพะฒะตะฝะฝะพ ะฟะตัะตัััะฐะธะฒะฐัััั
- ะะฐัััะพะนะบะฐ ัะพััะฐะฝัะตััั ะธ ะฒะพัััะฐะฝะฐะฒะปะธะฒะฐะตััั ะฟะพัะปะต ะฟะตัะตะทะฐะฟััะบะฐ Obsidian

### US-2: ะะพะทะฒัะฐั ะบ ะพะดะฝะพะบะพะปะพะฝะพัะฝะพะผั ัะตะถะธะผั

**ะะฐะบ** ะฟะพะปัะทะพะฒะฐัะตะปั, ะฟัะตะดะฟะพัะธัะฐััะธะน ัะธัะพะบะธะต ะบะฐััะพัะบะธ **ัะพัั** ะฟะตัะตะบะปััะธัััั ะพะฑัะฐัะฝะพ ะฒ Single column **ััะพะฑั** ะฒะธะดะตัั ะฟะพะปะฝัะน ัะตะบัั ะพะฟะธัะฐะฝะธั ะทะฐะดะฐัะธ ะฑะตะท ะพะฑัะตะทะบะธ.

**ะัะธัะตัะธะธ ะฟัะธัะผะบะธ:**
- ะะตัะตะบะปััะตะฝะธะต SingleโMulti ะผะณะฝะพะฒะตะฝะฝะพะต
- ะ ัะตะถะธะผะต Single ะบะฐััะพัะบะธ ะทะฐะฝะธะผะฐัั 100% ัะธัะธะฝั ะณััะฟะฟั (ัะตะบััะตะต ะฟะพะฒะตะดะตะฝะธะต)

### US-3: Multi-column + compact

**ะะฐะบ** ะฟะพะปัะทะพะฒะฐัะตะปั ั ะฑะพะปััะธะผ ัะธัะปะพะผ ะทะฐะดะฐั **ัะพัั** ะฒะบะปััะธัั ะพะดะฝะพะฒัะตะผะตะฝะฝะพ Multi-column ะธ Compact card view **ััะพะฑั** ะผะฐะบัะธะผะฐะปัะฝะพ ัะฟะปะพัะฝะธัั ะพัะพะฑัะฐะถะตะฝะธะต.

**ะัะธัะตัะธะธ ะฟัะธัะผะบะธ:**
- Compact-ะบะฐััะพัะบะธ ะฒ ัะตะถะธะผะต `multi` ะพัะพะฑัะฐะถะฐัััั ะฒ 4 ะบะพะปะพะฝะบะธ (full-width) ะธะปะธ 2 ะบะพะปะพะฝะบะธ (half-width) โ ะฐะฝะฐะปะพะณะธัะฝะพ default-ะบะฐััะพัะบะฐะผ
- ะะฐัััะพะนะบะธ ะฝะตะทะฐะฒะธัะธะผั ะธ ะบะพะผะฑะธะฝะธัััััั
- ะะฐ ะผะพะฑะธะปัะฝัั ัะบัะฐะฝะฐั (<600px) ะพะฑะต ะฝะฐัััะพะนะบะธ ะธะณะฝะพัะธัััััั โ ะฟัะธะฝัะดะธัะตะปัะฝะพ 1 ะบะพะปะพะฝะบะฐ (NFR-3)

---

## 4. ะัะฐะฝะธัั (Scope)

### ะ scope

- ะะปะพะฑะฐะปัะฝะฐั ะฝะฐัััะพะนะบะฐ `cardLayout: 'single' | 'multi'` ะฒ Settings
- CSS Grid ะฒ ัะตะปะต ะณััะฟะฟั (`tm-task-group__body`): 4 ะบะพะปะพะฝะบะธ ะดะปั full-width, 2 ะดะปั half-width
- ะะตะฐะบัะธะฒะฝัะน ะฟะตัะตัััั ะบะพะปะพะฝะพะบ ะฟัะธ ะธะทะผะตะฝะตะฝะธะธ `cardLayout` ะธะปะธ `group.fullWidth`
- ะะพะดะดะตัะถะบะฐ `default` ะธ `compact` ัะตะถะธะผะพะฒ ะบะฐััะพัะตะบ
- ะะธะณัะฐัะธั `data.json` (ะดะพะฑะฐะฒะปะตะฝะธะต `cardLayout: 'single'`)
- UI ะฟะตัะตะบะปััะฐัะตะปั ะฒ Settings tab
- `TaskGroup.svelte` ะธ `CollapsibleGroup.svelte`

### ะะฝะต scope

- ะะฐัััะพะนะบะฐ ัะธัะปะฐ ะบะพะปะพะฝะพะบ (ัะพะปัะบะพ ัะธะบัะธัะพะฒะฐะฝะฝัะต 4/2)
- ะะฐัััะพะนะบะฐ ะฝะฐ ััะพะฒะฝะต ะณััะฟะฟั ะธะปะธ ะดะพัะบะธ (ัะพะปัะบะพ ะณะปะพะฑะฐะปัะฝะพ)
- ะะดะฐะฟัะธะฒะฝัะน breakpoint ะฝะฐ ััะพะฒะฝะต ะพัะดะตะปัะฝะพะน ะณััะฟะฟั
- ะััะฝะฐั ัะฐัััะฐะฝะพะฒะบะฐ ะบะฐััะพัะตะบ ะฟะพ ะบะพะปะพะฝะบะฐะผ

---

## 5. ะขะตัะฝะธัะตัะบะธะน ะดะธะทะฐะนะฝ

### ะะทะผะตะฝะตะฝะธั ะฒ ัะธะฟะฐั ะดะฐะฝะฝัั

```typescript
// src/data/types.ts
export type CardLayout = 'single' | 'multi';

export interface Settings {
  language: LanguageSetting;
  defaultPriority: Priority;
  cardView: CardView;
  cardLayout: CardLayout; // NEW
}
```

### ะะฝะฐัะตะฝะธะต ะฟะพ ัะผะพะปัะฐะฝะธั

```typescript
// src/data/defaults.ts
export const DEFAULT_SETTINGS: Settings = {
  language: 'auto',
  defaultPriority: 'medium',
  cardView: 'default',
  cardLayout: 'single', // NEW โ ัะตะบััะตะต ะฟะพะฒะตะดะตะฝะธะต ะฟะพ ัะผะพะปัะฐะฝะธั
};

// ะะะะะ: ัะฐะบะถะต ะพะฑะฝะพะฒะธัั DEFAULT_DATA.version ั 5 ะดะพ 6,
// ััะพะฑั ัะฒะตะถะธะต ัััะฐะฝะพะฒะบะธ ะฝะต ะฟัะพะณะพะฝัะปะธ ะผะธะณัะฐัะธั ะฟัะธ ะบะฐะถะดะพะน ะทะฐะณััะทะบะต
export const DEFAULT_DATA: PluginData = {
  version: 6, // ะฑัะปะพ 5
  // ...ะพััะฐะปัะฝัะต ะฟะพะปั ะฑะตะท ะธะทะผะตะฝะตะฝะธะน
};
```

### ะะธะณัะฐัะธั ะดะฐะฝะฝัั

ะขะตะบััะฐั ะฒะตััะธั ััะตะผั: 5 (ะฟะพัะปะต ัะธัะธ `0007-feat-dynamic-layout`).

```typescript
// src/data/migration.ts
if (result.version < 6) {
  if (!result.settings.cardLayout) {
    result.settings.cardLayout = 'single';
  }
  result.version = 6;
}
```

### ะะพะณะธะบะฐ ะฒััะธัะปะตะฝะธั ะบะพะปะพะฝะพะบ

ะัะธะผะตะฝัะตััั ะพะดะธะฝะฐะบะพะฒะพ ะฒ `TaskGroup.svelte` ะธ `CollapsibleGroup.svelte`:

```svelte
<!-- src/ui/TaskGroup.svelte (ะฐะฝะฐะปะพะณะธัะฝะพ ะฒ CollapsibleGroup.svelte) -->
<script lang="ts">
  import { dataStore } from '../stores/dataStore';

  // ...ัััะตััะฒัััะธะต ะฟัะพะฟัั...

  $: cardLayout = $dataStore.settings.cardLayout;
  $: isMulti = cardLayout === 'multi';
  $: columns = isMulti ? (group.fullWidth ? 4 : 2) : 1;
</script>

<!-- TaskGroup: -->
<div
  class="tm-task-group__body"
  class:tm-task-group__body--multi={isMulti}
  data-group-id={groupId}
  use:useSortable={{ groupId }}
  style="--tm-card-columns: {columns}"
>...</div>

<!-- CollapsibleGroup (ะฐะฝะฐะปะพะณะธัะฝะพ, ะบะปะฐัั ะดััะณะพะน): -->
<div
  class="tm-collapsible-group__body"
  class:tm-collapsible-group__body--multi={isMulti}
  data-group-id={groupId}
  use:useSortable={{ groupId }}
  style="--tm-card-columns: {columns}"
>...</div>
```

### ะะทะผะตะฝะตะฝะธะต TaskCard.svelte (tooltip ะดะปั FR-7)

ะ default-ะบะฐััะพัะบะต ะดะพะฑะฐะฒะธัั ะฐััะธะฑัั `title` ะบ ะฟะพะปั ยซะงัะพยป, ััะพะฑั ะฟัะธ ะฝะฐะฒะตะดะตะฝะธะธ ะฟะพะบะฐะทัะฒะฐะปัั ะฟะพะปะฝัะน ัะตะบัั:

```svelte
<!-- src/ui/TaskCard.svelte โ ัะปะตะผะตะฝั default-ะบะฐััะพัะบะธ -->
<!-- ะัะปะพ: -->
<div class="tm-task-card__what">{task.what}</div>

<!-- ะกัะฐะปะพ: -->
<div class="tm-task-card__what" title={task.what}>{task.what}</div>
```

> Compact-ะบะฐััะพัะบะฐ (`tm-task-card__what-compact`) ัะถะต ะธะผะตะตั `title={task.what}` โ ะธะทะผะตะฝะตะฝะธะน ะฝะต ััะตะฑัะตั.

### CSS

`CollapsibleGroup` ะธัะฟะพะปัะทัะตั ะบะปะฐัั `.tm-collapsible-group__body` (ะฐ ะฝะต `.tm-task-group__body`) โ ะพะฑะฐ ะบะปะฐััะฐ ััะตะฑััั ะพะดะธะฝะฐะบะพะฒัั ะธะทะผะตะฝะตะฝะธะน.

```css
/* src/styles.css */

/* --- TaskGroup body (ะฟะพะปะฝัะน ะธัะพะณะพะฒัะน ะฑะปะพะบ) --- */
.tm-task-group__body {
  flex: 1;
  overflow-y: auto;
  overflow-x: hidden;
  display: grid;
  grid-template-columns: repeat(var(--tm-card-columns, 1), minmax(0, 1fr));
  align-content: start;
  gap: 0.35rem;      /* ัะพััะฐะฝะตะฝะพ ัััะตััะฒัััะตะต ะทะฝะฐัะตะฝะธะต */
  padding: 0.35rem;  /* ัะพััะฐะฝะตะฝะพ ัััะตััะฒัััะตะต ะทะฝะฐัะตะฝะธะต */
  min-height: 2rem;  /* ัะพััะฐะฝะตะฝะพ: drop-target ะดะปั drag-and-drop */
}

.tm-task-group__body > .tm-empty-state {
  grid-column: 1 / -1;
}

/* --- CollapsibleGroup body (backlog, completed) โ ะฟะพะปะฝัะน ะธัะพะณะพะฒัะน ะฑะปะพะบ --- */
.tm-collapsible-group__body {
  padding: 0.35rem;
  max-height: 50vh;
  overflow-y: auto;
  overflow-x: hidden;
  display: grid;
  grid-template-columns: repeat(var(--tm-card-columns, 1), minmax(0, 1fr));
  align-content: start;
  gap: 0.35rem;
  min-height: 2rem;
}

.tm-collapsible-group__body > .tm-empty-state {
  grid-column: 1 / -1;
}

/* --- ะะพะฑะธะปัะฝัะต: ะฟัะธะฝัะดะธัะตะปัะฝะพ 1 ะบะพะปะพะฝะบะฐ --- */
@media (max-width: 600px) {
  .tm-task-group__body,
  .tm-collapsible-group__body {
    grid-template-columns: 1fr;
  }
}

/* --- Multi-ัะตะถะธะผ: ะฟะพะปะต ยซะงัะพยป ะฒ default-ะบะฐััะพัะบะต ะพะฑัะตะทะฐะตััั ะฒ ะพะดะฝั ัััะพะบั ---
     ะะฐะทะพะฒัะน .tm-task-card__what ะธะผะตะตั display:-webkit-box ะธ -webkit-line-clamp:3,
     ะบะพัะพััะต ะฝะตัะพะฒะผะตััะธะผั ั white-space:nowrap โ ะธั ะฝัะถะฝะพ ัะฒะฝะพ ัะฑัะพัะธัั. */
.tm-task-group__body--multi .tm-task-card__what,
.tm-collapsible-group__body--multi .tm-task-card__what {
  display: block;             /* ัะฑัะพั -webkit-box */
  -webkit-line-clamp: unset;  /* ัะฑัะพั 3-ัััะพัะฝะพะณะพ clamp */
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
```

> **ะัะธะผะตัะฐะฝะธะต:** `flex-direction: column` ะธ `display: flex` ัะดะฐะปััััั โ ะฟัะธ `display: grid` ะพะฝะธ ะฝะต ะฝัะถะฝั. ะัะธ `--tm-card-columns: 1` (ัะตะถะธะผ `single`) grid ั ะพะดะฝะพะน ะบะพะปะพะฝะบะพะน ะฒะธะทัะฐะปัะฝะพ ะธะดะตะฝัะธัะตะฝ ะฟัะตะถะฝะตะผั flex-ะปะตะนะฐััั. `gap` ะธ `padding` ัะพััะฐะฝะตะฝั ะบะฐะบ `0.35rem` โ ะธะทะผะตะฝะตะฝะธะต ะทะฝะฐัะตะฝะธะน ะฝะต ะฟะปะฐะฝะธัะพะฒะฐะปะพัั.

### UI ะฒ Settings tab

ะะพะฒัะน ะฟะฐัะฐะผะตัั ะดะพะฑะฐะฒะปัะตััั ะฟะพัะปะต `cardView`:

```typescript
// src/settings.ts โ ะดะพะฑะฐะฒะธัั ะฟะพัะปะต ะฑะปะพะบะฐ cardView
new Setting(containerEl)
  .setName(tr('settings.cardLayout'))
  .setDesc(tr('settings.cardLayoutDesc'))
  .addDropdown(dd =>
    dd
      .addOptions({
        single: tr('settings.cardLayoutSingle'),
        multi:  tr('settings.cardLayoutMulti'),
      })
      .setValue(this.plugin.data.settings.cardLayout)
      .onChange(async (value) => {
        this.plugin.data.settings.cardLayout = value as 'single' | 'multi';
        dataStore.set(this.plugin.data);
        await this.plugin.savePluginData();
      })
  );
```

### ะะพะบะฐะปะธะทะฐัะธั

```typescript
// src/i18n/en.ts
settings: {
  // ...ัััะตััะฒัััะธะต ะบะปััะธ...
  cardLayout: 'Card layout',
  cardLayoutDesc: 'Number of cards per row in each group',
  cardLayoutSingle: 'Single column',
  cardLayoutMulti: 'Multi-column (4 / 2)',
}

// src/i18n/ru.ts
settings: {
  // ...ัััะตััะฒัััะธะต ะบะปััะธ...
  cardLayout: 'ะะตะนะฐัั ะบะฐััะพัะตะบ',
  cardLayoutDesc: 'ะะพะปะธัะตััะฒะพ ะบะฐััะพัะตะบ ะฒ ัััะพะบะต',
  cardLayoutSingle: 'ะะดะฝะฐ ะบะพะปะพะฝะบะฐ',
  cardLayoutMulti: 'ะะตัะบะพะปัะบะพ ะบะพะปะพะฝะพะบ (4 / 2)',
}
```

### ะะทะผะตะฝัะตะผัะต ัะฐะนะปั

| ะคะฐะนะป | ะะทะผะตะฝะตะฝะธะต |
|------|-----------|
| `src/data/types.ts` | ะะพะฑะฐะฒะธัั ัะธะฟ `CardLayout`, ะฟะพะปะต `cardLayout` ะฒ `Settings` |
| `src/data/defaults.ts` | `DEFAULT_SETTINGS.cardLayout = 'single'`; `DEFAULT_DATA.version = 6` |
| `src/data/migration.ts` | ะะธะณัะฐัะธั `version < 6`: ะดะพะฑะฐะฒะธัั `settings.cardLayout = 'single'` |
| `src/ui/TaskGroup.svelte` | ะงะธัะฐัั `$dataStore.settings.cardLayout`, ะฒััะธัะปััั `columns`, ะฟะตัะตะดะฐะฒะฐัั ัะตัะตะท `style` + `--multi` ะผะพะดะธัะธะบะฐัะพั |
| `src/ui/CollapsibleGroup.svelte` | ะะฝะฐะปะพะณะธัะฝะพ `TaskGroup`: `isMulti`, `columns`, `style`, `--multi` ะผะพะดะธัะธะบะฐัะพั |
| `src/ui/TaskCard.svelte` | ะะพะฑะฐะฒะธัั `title={task.what}` ะฝะฐ `<div class="tm-task-card__what">` (default-ะบะฐััะพัะบะฐ) |
| `src/styles.css` | CSS Grid ะฒ ะพะฑะพะธั body-ะบะปะฐััะฐั, Empty State fix, media query, truncation ะฒ `--multi` |
| `src/settings.ts` | ะะพะฒัะน `Setting` ั dropdown ะดะปั `cardLayout` |
| `src/i18n/types.ts` | ะะพะฑะฐะฒะธัั ะบะปััะธ `settings.cardLayout`, `cardLayoutDesc`, `cardLayoutSingle`, `cardLayoutMulti` ะฒ `TranslationKey` |
| `src/i18n/en.ts` | ะะปััะธ `cardLayout`, `cardLayoutDesc`, `cardLayoutSingle`, `cardLayoutMulti` |
| `src/i18n/ru.ts` | ะะฝะฐะปะพะณะธัะฝะพ ะฝะฐ ััััะบะพะผ |

**ะะต ะธะทะผะตะฝัะตััั:** `Group` ะธะฝัะตััะตะนั, `BoardSettingsPopup`, `GroupSettingsPopup`.

---

## 6. ะขะตััะธัะพะฒะฐะฝะธะต

1. **ะะตัะพะปัะฝะพะต ัะพััะพัะฝะธะต** โ ะฝะพะฒะฐั ัััะฐะฝะพะฒะบะฐ ะธะปะธ ะผะธะณัะฐัะธั ััะฐัะพะน: `cardLayout: 'single'`, ะบะฐััะพัะบะธ ะฒ 1 ะบะพะปะพะฝะบั
2. **ะะตัะตะบะปััะธัั ะฒ Multi** โ ะฒัะต ะณััะฟะฟั ะผะณะฝะพะฒะตะฝะฝะพ ะฟะตัะตัััะฐะธะฒะฐัััั ะฒ 4/2 ะบะพะปะพะฝะบะธ
3. **ะะตัะตะบะปััะธัั ะพะฑัะฐัะฝะพ ะฒ Single** โ ะฒัะต ะณััะฟะฟั ะฒะพะทะฒัะฐัะฐัััั ะฒ 1 ะบะพะปะพะฝะบั
4. **Full-width, 8 ะทะฐะดะฐั, multi** โ 2 ัััะพะบะธ ะฟะพ 4 ะบะฐััะพัะบะธ
5. **Half-width, 8 ะทะฐะดะฐั, multi** โ 4 ัััะพะบะธ ะฟะพ 2 ะบะฐััะพัะบะธ
6. **Full-width, 5 ะทะฐะดะฐั, multi** โ ัััะพะบะฐ ะธะท 4 + ะพะดะฝะฐ ะบะฐััะพัะบะฐ ะฝะฐ 25% ัะธัะธะฝั (ะฝะต ัะฐัััะณะธะฒะฐะตััั)
7. **Empty State ะฒ multi** โ ะฟัััะฐั ะณััะฟะฟะฐ: Empty State ะทะฐะฝะธะผะฐะตั 100% ัะธัะธะฝั, ะฝะต 25%
8. **Drag-and-drop ะฒะฝัััะธ ะณััะฟะฟั ะฒ multi** โ ะบะฐััะพัะบะธ ะฟะตัะตัััะฐะธะฒะฐัััั ะบะพััะตะบัะฝะพ
9. **Drag-and-drop ะผะตะถะดั 4-ะบะพะปะพะฝะพัะฝะพะน ะธ 2-ะบะพะปะพะฝะพัะฝะพะน ะณััะฟะฟะฐะผะธ** โ ะทะฐะดะฐัะฐ ะบะพััะตะบัะฝะพ ะฟะตัะตะฝะพัะธััั
10. **Compact + Multi** โ ะฟัะธ `cardView: 'compact'` ะธ `cardLayout: 'multi'`: compact-ะบะฐััะพัะบะธ ะพัะพะฑัะฐะถะฐัััั ะฒ **4 ะบะพะปะพะฝะบะธ** (full-width) ะธะปะธ **2 ะบะพะปะพะฝะบะธ** (half-width). ะะตะนะฐัั ััะฐะฑะธะปะตะฝ, ะพัะธะฑะพะบ ะฝะตั
11. **Default + Multi, ะดะปะธะฝะฝัะน ะทะฐะณะพะปะพะฒะพะบ** โ ะทะฐะดะฐัะฐ ยซะัะพะฒะตััะธ ัะธะฝะฐะปัะฝะพะต ัะตะฒัั ะบะพะดะฐ ะธ ะฟะพะดะณะพัะพะฒะธัั ะพััััยป ะฒ 4-ะบะพะปะพะฝะพัะฝะพะผ ัะตะถะธะผะต: ะฝะฐะทะฒะฐะฝะธะต ะพะฑัะตะทะฐะตััั ะฒ ะพะดะฝั ัััะพะบั ั ยซโฆยป, ะฟัะธ ะฝะฐะฒะตะดะตะฝะธะธ tooltip ะฟะพะบะฐะทัะฒะฐะตั ะฟะพะปะฝัะน ัะตะบัั
12. **Default + Multi, ะบะพัะพัะบะธะน ะทะฐะณะพะปะพะฒะพะบ** โ ะทะฐะดะฐัะฐ ยซะะตะฒัั ะบะพะดะฐยป ะฒ 4-ะบะพะปะพะฝะพัะฝะพะผ ัะตะถะธะผะต: ะฝะฐะทะฒะฐะฝะธะต ะฟะพะผะตัะฐะตััั ะฑะตะท ะพะฑัะตะทะบะธ, tooltip ะฝะต ะผะตัะฐะตั
13. **ะะตัะตะบะปััะตะฝะธะต fullWidth ะณััะฟะฟั ะฒ ัะตะถะธะผะต Multi** โ ะธะทะผะตะฝะธัั fullโhalf ะฒ ะฝะฐัััะพะนะบะฐั ะดะพัะบะธ: ะบะพะปะพะฝะบะธ ะผะตะฝััััั ั 4 ะฝะฐ 2 ะฑะตะท ะฟะตัะตะทะฐะณััะทะบะธ
14. **ะะตัะตะทะฐะฟััะบ Obsidian** โ ะฝะฐัััะพะนะบะฐ `cardLayout: 'multi'` ัะพััะฐะฝัะตััั
15. **ะะธะณัะฐัะธั ััะฐัะพะณะพ data.json** โ JSON ะฑะตะท `cardLayout` ะทะฐะณััะถะฐะตััั, ะบะฐััะพัะบะธ ะฒ 1 ะบะพะปะพะฝะบั
16. **ะฃะทะบะธะน ัะบัะฐะฝ (<600px)** โ ะฒ ัะตะถะธะผะต `multi` ะบะฐััะพัะบะธ ะฟัะธะฝัะดะธัะตะปัะฝะพ ะฒ 1 ะบะพะปะพะฝะบั (media query)
17. **ะกะผะตะฝะฐ ัะทัะบะฐ** โ ะฟะพะดะฟะธัะธ ะฒ Settings dropdown ะบะพััะตะบัะฝะพ ะฟะตัะตะบะปััะฐัััั

---

## 7. ะะปะฐะฝ ัะตะฐะปะธะทะฐัะธะธ

1. ะะฑะฝะพะฒะธัั `types.ts` โ ะดะพะฑะฐะฒะธัั `CardLayout`, ะฟะพะปะต ะฒ `Settings`
2. ะะฑะฝะพะฒะธัั `defaults.ts` โ `cardLayout: 'single'` ะฒ `DEFAULT_SETTINGS`; `version: 6` ะฒ `DEFAULT_DATA`
3. ะะพะฑะฐะฒะธัั ะผะธะณัะฐัะธั `version < 6` ะฒ `migration.ts`
4. ะะพะฑะฐะฒะธัั ะบะปััะธ ะฒ `src/i18n/types.ts` โ ัะฐััะธัะธัั `TranslationKey`
5. ะะพะฑะฐะฒะธัั ะฟะตัะตะฒะพะดั ะฒ `en.ts` ะธ `ru.ts`
6. ะะฑะฝะพะฒะธัั `settings.ts` โ ะฝะพะฒัะน dropdown `cardLayout`
7. ะะฑะฝะพะฒะธัั `TaskGroup.svelte` โ `isMulti`, `columns`, `style`, ะผะพะดะธัะธะบะฐัะพั `--multi`
8. ะะฑะฝะพะฒะธัั `CollapsibleGroup.svelte` โ ะฐะฝะฐะปะพะณะธัะฝะพ `TaskGroup`
9. ะะฑะฝะพะฒะธัั `TaskCard.svelte` โ ะดะพะฑะฐะฒะธัั `title={task.what}` ะฝะฐ `.tm-task-card__what`
10. ะะฑะฝะพะฒะธัั `styles.css` โ CSS Grid ะดะปั ะพะฑะพะธั body-ะบะปะฐััะพะฒ, Empty State, media query, truncation
11. ะััะฝะพะต ัะตััะธัะพะฒะฐะฝะธะต ะฟะพ ัะตะบะปะธััั (ะฟ.6)

---

## 8. ะะธัะบะธ

| ะะธัะบ | ะะตัะพััะฝะพััั | ะะธัะธะณะฐัะธั |
|------|-------------|-----------|
| SortableJS ะบะพะฝัะปะธะบััะตั ั CSS Grid | ะะธะทะบะฐั | SortableJS ะฟะพะดะดะตัะถะธะฒะฐะตั grid; ะฟัะพะฒะตัะธัั drag-and-drop ะฒ ะฟะตัะฒัั ะพัะตัะตะดั |
| ะะตัะตัะพะด ั `flex` ะฝะฐ `grid` ะฝะฐัััะฐะตั ะพััััะฟั | ะกัะตะดะฝัั | ะัะธ `columns: 1` grid ะฒะธะทัะฐะปัะฝะพ ะธะดะตะฝัะธัะตะฝ flex; ะฟัะพะฒะตัะธัั `padding`, `gap` |
| 4 ะบะพะปะพะฝะบะธ ะฒ default-ะฒะธะดะต โ ะบะฐััะพัะบะธ ัะปะธัะบะพะผ ัะทะบะธะต ะฝะฐ ัะทะบะพะน ะฟะฐะฝะตะปะธ | ะกัะตะดะฝัั | `minmax(0, 1fr)` โ ะบะฐััะพัะบะธ ัะถะธะผะฐัััั ะฑะตะท ัะบัะพะปะปะฐ; ะฟัะธะฝััะพะต ัะตัะตะฝะธะต |
| `CollapsibleGroup` ะธัะฟะพะปัะทัะตั ะพัะดะตะปัะฝัะน CSS-ะบะปะฐัั `tm-collapsible-group__body` | ะะฐะบัััะพ | CSS ะธ ะผะพะดะธัะธะบะฐัะพั `--multi` ัะฒะฝะพ ะพะฟะธัะฐะฝั ะดะปั ะพะฑะพะธั ะบะปะฐััะพะฒ |
| ะะฒะพะนะฝะพะต ัะพััะฐะฝะตะฝะธะต ะฟัะธ ะพะฑะฝะพะฒะปะตะฝะธะธ `cardLayout` ัะตัะตะท Settings | ะะธะทะบะฐั | ะัะพะฒะตัะธัั, ััะพ ะธะทะผะตะฝะตะฝะธะต ัะตัะตะท Settings tab ะฝะต ััะธะณะณะตัะธั ะดะฒะพะนะฝะพะน `persist()` (ะฐะฝะฐะปะพะณะธัะฝะพ ัััะตััะฒัััะตะผั `cardView`) |

---

## 9. ะัะบััััะต ะฒะพะฟัะพัั

- *(ะทะฐะบัััะพ)* `minmax(0, 1fr)` โ ะบะฐััะพัะบะธ ัะถะธะผะฐัััั ะฑะตะท ะณะพัะธะทะพะฝัะฐะปัะฝะพะณะพ ัะบัะพะปะปะฐ
- *(ะทะฐะบัััะพ)* ะะดะธะฝะพัะฝะฐั ะบะฐััะพัะบะฐ ะทะฐะฝะธะผะฐะตั 25% โ ะฒัะต ะบะฐััะพัะบะธ ะพะดะธะฝะฐะบะพะฒะพะณะพ ัะฐะทะผะตัะฐ, ัะฐัััะณะธะฒะฐะฝะธะต ะฝะต ะฝัะถะฝะพ
- *(ะทะฐะบัััะพ)* ะะฐ ะผะพะฑะธะปัะฝัั (<600px) โ ะฟัะธะฝัะดะธัะตะปัะฝะพ 1 ะบะพะปะพะฝะบะฐ ัะตัะตะท media query
- *(ะทะฐะบัััะพ)* ะะฐัััะพะนะบะฐ ะณะปะพะฑะฐะปัะฝะฐั (ะฝะต per-group, ะฝะต per-board) โ ะฐะฝะฐะปะพะณะธัะฝะพ `cardView`
- *(ะทะฐะบัััะพ)* Default-ะฒะธะด ะฒ multi: ะฟะพะปะต ยซะงัะพยป ะพะฑัะตะทะฐะตััั ะฒ ะพะดะฝั ัััะพะบั + tooltip, ะฐะฝะฐะปะพะณะธัะฝะพ compact
- *(ะทะฐะบัััะพ)* 1โ3 ะทะฐะดะฐัะธ ะฒ ะณััะฟะฟะต ะฒ multi: ะบะฐััะพัะบะธ ะทะฐะฝะธะผะฐัั 25% ัะธัะธะฝั, ะฟัััะพะต ะผะตััะพ ัะฟัะฐะฒะฐ โ ะพะถะธะดะฐะตะผะพะต ะฟะพะฒะตะดะตะฝะธะต
- *(ะทะฐะบัััะพ)* ะกัััะบัััะฐ `CollapsibleGroup.svelte` โ ะธัะฟะพะปัะทัะตั `tm-collapsible-group__body`, ะธะทะผะตะฝะตะฝะธั ะพะฟะธัะฐะฝั ัะฒะฝะพ
- *(ะทะฐะบัััะพ)* `gap`/`padding` ะพััะฐัััั `0.35rem` โ ะทะฝะฐัะตะฝะธะต `0.5rem` ะฒ ะฟัะตะดัะดััะตะน ะฒะตััะธะธ ัะฟะตะบะธ ะฑัะปะพ ะพะฟะตัะฐัะบะพะน
- *(ะทะฐะบัััะพ)* `cardLayout` ะฒ ะบะพะผะฟะพะฝะตะฝัะฐั ัะธัะฐะตััั ะธะท `$dataStore` ะฝะฐะฟััะผัั (ะะฐัะธะฐะฝั A) โ ะฐะฝะฐะปะพะณะธัะฝะพ `TaskCard.svelte`; `dataStore` ะธะผะฟะพััะธััะตััั ะฒ `TaskGroup` ะธ `CollapsibleGroup`
- *(ะทะฐะบัััะพ)* ะกะพัะตัะฐะฝะธะต `compact + multi` **ัะฐะฑะพัะฐะตั**: compact-ะบะฐััะพัะบะธ ะพัะพะฑัะฐะถะฐัััั ะฒ 4/2 ะบะพะปะพะฝะบะธ โ ะฐะฝะฐะปะพะณะธัะฝะพ default. ะัะธะฝัะดะธัะตะปัะฝะฐั 1 ะบะพะปะพะฝะบะฐ ัะพะปัะบะพ ะฝะฐ ะผะพะฑะธะปัะฝัั (<600px) ัะตัะตะท NFR-3
